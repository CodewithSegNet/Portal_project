<!doctype html>
<html class="no-js" lang="zxx">  <head>
    <!-- Meta Tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="keywords" content="Braham Health College" />
    <meta
      name="description"
      content="Braham Health College Mararaba New Karu Nassarawa"
    />
    <meta name="copyright" content="" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Title -->
    <title>Dashboard - Braham Health College</title>

    <!-- Favicon -->
    <link
      rel="icon"
      href="{{ url_for('static', filename='img/favicon.png')}}"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/bootstrap.min.css')}}"
    />
    <!-- Nice Select CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/nice-select.css')}}"
    />
    <!-- Font Awesome CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/font-awesome.min.css')}}"
    />
    <!-- icofont CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/icofont.css')}}"
    />
    <!-- Slicknav -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/slicknav.min.css')}}"
    />
    <!-- Owl Carousel CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/owl-carousel.css')}}"
    />
    <!-- Datepicker CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/datepicker.css')}}"
    />
    <!-- Animate CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/animate.min.css')}}"
    />
    <!-- Magnific Popup CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/magnific-popup.css')}}"
    />

    <!-- Medipro CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/normalize.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/dashboard.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/special.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/responsive.css')}}"
    />
  </head>
  <body>
    <div class="dashboard">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="aside-image">
          <a href="{{ url_for('pages.super_admin_login')}}">

            <img href="{{ url_for('pages.super_admin_login')}}"
            src="{{user_image}}" />
          </a>
      
          <span class="aside-logo-name">Braham College of Health</span>
        </div>
        <ul class="aside-bar menu" id="menu">
          <li>
            <a
              href="#"
              class="dash-btn sidebar-item {{ 'active' if active_section == 'dashboard' else '' }}"
              data-content="dashboard"
              ><i class="icofont-home"></i> Dashboard</a
            >
          </li>
          <li>
            <a
              href="#"
              class="dash-btn sidebar-item"
              data-content="registration"
              ><i class="icofont-user"></i> Registration</a
            >
          </li>

          <li>
            <a
              href="#"
              class="dash-btn sidebar-item {{ 'active' if active_section == 'dashboard' else '' }}"
              data-content="filter"
              ><i class="icofont-filter"></i> filter</a
            >
          </li>

          <li>
            <a href="#" class="dash-btn sidebar-item" data-content="upload"
              ><i class="icofont-certificate-alt-1"></i> Upload Result</a
            >
          </li>


          <li>
            <a
              href="#"
              class="dash-btn sidebar-item {{ 'active' if active_section == 'dashboard' else '' }}"
              data-content="anouncement"
              ><i class="icofont-envelope"></i> Anouncement</a
            >
          </li>


          <li>
            <a href="#" class="dash-btn sidebar-item" data-content="password"
              ><i class="icofont-ui-password"></i> Update Password</a
            >
          </li>



          <li>
            <a
              class="dash-btn"
              href="{{ url_for('pages.log_out_admin') }}"
              data-content=""
              ><i class="icofont-exit"></i> Log Out</a
            >
          </li>
        </ul>
      </aside>

      <!-- Main Content Area -->
      <main class="main-content">
        <!-- Nav -->
        <nav class="navbar">
          <div class="navbar__left">
            <span>Hello, {{ user.email }}</span>
          </div>

          <div
            class="navbar__right d-flex align-items-center justify-content-between"
          >
            <div class="navbar__burger">
              <i class="icofont-navigation-menu"></i>
            </div>
          </div>

          <div class="search-container">
            <form
              class="new_form"
              action="{{ url_for('user.get_student_info', identifier='') }}"
              method="GET"
            >
              <input
                type="text"
                id="search"
                name="identifier"
                placeholder="Admission Number..."
              />
              <button id="searchBtn" type="submit">Search</button>
            </form>
          </div>
        </nav>
        <hr class="mt-0 mb-0" />

        <div id="dashboard" class="content-section">
          <div class="dashboard_container container px-5">
            <div class="row">
              <div class="admin_board pt-4">
                <h6>Student Information</h6>
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %} {% set shown = false %}
                <div class="flash-messages">
                  {% for category, message in messages %} {% if not shown %}
                  <div class="alert alert-{{ category }}">{{ message }}</div>
                  {% set shown = true %} {% endif %} {% endfor %}
                </div>
                {% endif %} {% endwith %}

                <div class="row">
                  <div class="col-md-3">
                    {% if student_info.images %}
                    <ul>
                      {% for image in student_info.images %}
                      <div class="pt-2">
                        <img
                          class="img-fluid rounded-circle profile-pic2"
                          src="{{ url_for('pages.get_image', admission_number=student_info.admission_number) }}"
                          alt="Student Image"
                        />
                      </div>
                      {% endfor %}
                    </ul>
                    {% endif %}
                  </div>
                </div>

                <div class="row pt-3 black">
                  <div class="col-md-4">
                    <p class="black">
                      <strong>Admission Number: </strong>
                      <span style="color: green">
                        {{ student_info.admission_number }}
                      </span>
                    </p>
                    <p class="black">
                      <strong> Name: </strong> {{ student_info.name }}
                    </p>
                  </div>

                  <div class="col-md-5">
                    <li>
                      <strong>Department Name:</strong> {{
                      student_info.department_name }}
                    </li>
                    <li><strong> State: </strong> {{ student_info.state }}</li>
                  </div>

                  <div class="col-md-3">
                    {% if student_info.department %}
                    <li>
                      <strong>Level: </strong> {{
                      student_info.department.department_level }}
                    </li>
                    {% endif %}
                  </div>
                </div>

                <div class="row black">
                  <div class="col-md-4">
                    <li><strong>Gender: </strong> {{ student_info.gender }}</li>
                    <li><strong>Email: </strong> {{ student_info.email }}</li>
                  </div>

                  <div class="col-md-5 black">
                    {% if student_info.date_of_birth %}
                    <p class="black">
                      <strong>Date of Birth: </strong> {{
                      student_info.date_of_birth }}
                    </p>
                    {% else %}
                    <p>Date of Birth: N/A</p>
                    {% endif %}
                    <li>
                      <strong>Phone Number: </strong> {{
                      student_info.phone_number }}
                    </li>
                  </div>

                  <div class="col-md-3 black">
                    {% if student_info.semesters %} {% for semester in
                    student_info.semesters %}
                    <li><strong>Semester:</strong> {{ semester.semester }}</li>
                    {% endfor %} {% endif %}
                  </div>
                </div>

                <div class="row black"></div>

                <div class="row pt-3 black">
                  <div class="col-md-12 card black">
                    {% if student_info.courses %}
                    <div class="pt-2">
                      <div class="table-responsive table-responsive-stack">
                        <table class="table table-striped">
                          <thead>
                            <tr>
                              <th scope="col">Course Code</th>
                              <th scope="col">Course Title</th>
                              <th scope="col">Credit</th>
                              <th scope="col">CA Score</th>
                              <th scope="col">Exam Score</th>
                              <th scope="col">Total Score</th>
                              <th scope="col">Grade</th>
                              <th scope="col">Remark</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for course in student_info.courses %}
                            <tr>
                              <td>{{ course.course_code }}</td>
                              <td>{{ course.course_title }}</td>
                              <td>{{ course.credit }}</td>
                              <td>{{ course.ca_score }}</td>
                              <td>{{ course.exam_score }}</td>
                              <td>{{ course.total_score }}</td>
                              <td>{{ course.grade }}</td>
                              <td>{{ course.remark }}</td>
                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>

                      </div>
            
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


    

        <div id="password" class="content-section" style="display: none">
          <div class="dashboard_container container px-5">
            <div class="row">
              <div class="admin_board pt-4">
                <div
                  class="row d-flex align-items-center justify-content-center"
                >
                  <div class="card col-md-4 pt-3 pb-3">
                    <div class="row px-4">
                      <div class="">
                        <h5>Update Password</h5>

                        <div class="col-md-12 px-0 pt-3">
                          <p class="black">
                            <strong>Admission Number: </strong>
                            <span style="color: green">
                              {{ student_info.admission_number }}
                            </span>
                          </p>
                          <p class="black">
                            <strong> Name: </strong> {{ student_info.name }}
                          </p>
                        </div>
            
                        <form
                          class="pt-3"
                          method="post"
                          action="{{ url_for('user.update_password', admission_number=student_info.admission_number) }}"
                        >
                          <input type="hidden" name="_method" value="PUT" />
            
                          <input
                            type="hidden"
                            name="admission_number"
                            value="{{ student_info.admission_number }}"
                          />
            
                          <label for="new_password">New Password:</label>
                          <input
                            type="password"
                            id="new_password"
                            name="new_password"
                            required
                          />
            
                          <button class="btn btn-primary mt-3" type="submit">
                            Update Password
                          </button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>



        <div id="anouncement" class="content-section" style="display: none">
          <div class="dashboard_container container px-5 d-flex justify-content-center">
            <div class="row anouncement">
              <div class="admin_board pt-4">
                  <!-- Notification Form -->
                  <form
  id="notificationForm"
  class="form-base fade-in-alt pr-0"
  method="post"
>


<div class="container card">
  <h5 class="pb-3 pt-3">Send Notification</h5>

  <div class="flash-messages">
    <div class="alert" style="display: none">
      <div id="message"></div>
    </div>
  </div>


  <div class="row">
    <div class="col-md-12 pt-2">
      <label for="name">Subject *</label>
      <input type="text" id="name" name="name" required />
    </div>
  </div>

  <div class="row">
    <div class="col-md-12 pt-2">
      <label for="message">Message *</label>
      <textarea class="form-control" id="message" name="message" rows="3" required></textarea>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 pt-2">
      <label for="semesters">Semester *</label>
      <select id="semesters" name="semesters" required>
        <option value="first">first</option>
        <option value="second">second</option>
      </select>
    </div>
 

    <div class="col-md-6 pt-2">
      <label for="department_level"
        >Department Level *</label
      >
      <select
        id="department_level"
        name="department_level"
        required
      >
        <option value="100">100</option>
        <option value="200">200</option>
        <option value="300">300</option>
      </select>
    </div>



    <div class="col-md-12 pt-2">
      <label for="department_name">Department Name *</label>
      <select name="department_name" id="department_name">
        <option value="Pharmacy Technician">
          Pharmacy Technician
        </option>
        <option value="Community Health Extention">
          Community Health Extention
        </option>
        <option value="medical laboratory technician">
          medical laboratory technician
        </option>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 form-check form-checkbox">
      <input class="form-check-input " type="checkbox" id="send_to_everybody" name="send_to_everybody" />
      <label class="form-check-label form-label" for="send_to_everybody">Send to Everybody</label>
    </div>
  </div>

          
                      <button type="submit" class="btn btn-primary mt-2 mb-3">Send Notification</button>
                  </form>
              </div>


              </div>
            </div>
          </div>
        </div>
        

        <script>
          // Handle form submission using JavaScript
        
  // Handle form submission using JavaScript
  document.getElementById('notificationForm').addEventListener('submit', function(event) {
    event.preventDefault(); 
    
    const token = "{{ token }}"; 
    
    // Check if the token is present
    if (!token) {
        alert('Token is missing. Please log in.');
        return;
    }

    // Get form data
    const formData = new FormData(this);

    // Fetch API request
    fetch('/api/v2/notifications/', {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            name: formData.get('name'),
            message: formData.get('message'),
            semesters: formData.get('semesters'),
            department_name: formData.get('department_name'),
            department_level: formData.get('department_level'),
            send_to_everybody: formData.get('send_to_everybody') ? true : false
        })
    })
    .then(response => response.json()) // Ensure response is JSON
    .then(data => {
        const alertDiv = document.querySelector('.alert');
        const messageDiv = document.getElementById('message');
        
        if (data.success) {
            alertDiv.classList.remove('alert-danger');
            alertDiv.classList.add('alert-success');
            messageDiv.textContent = 'Notification sent successfully!';
        } else {
            alertDiv.classList.remove('alert-success');
            alertDiv.classList.add('alert-danger');
            messageDiv.textContent = data.message || 'An error occurred while sending the notification.';
        }

        // Show the alert
        alertDiv.style.display = 'block';
    })
    .catch(error => {
        const alertDiv = document.querySelector('.alert');
        const messageDiv = document.getElementById('message');

        alertDiv.classList.remove('alert-success');
        alertDiv.classList.add('alert-danger');
        messageDiv.textContent = 'An error occurred: ' + error.message;

        // Show the alert
        alertDiv.style.display = 'block';
    });
});
      </script>
      



        <div id="registration" class="content-section" style="display: none">
          <div class="dashboard_container container px-5">
            <div class="row">
              <div class="admin_board pt-4">
                <div
                  class="row d-flex align-items-center justify-content-center"
                >
                  <div class="card col-md-7 pt-5 pb-5">
                    <form
                      id="myForm"
                      class="form-base fade-in-alt pr-0"
                      action="{{ url_for('students_register') }}"
                      method="post"

                      data-url="{{ url_for('students_register') }}"
                    >
                    <div class="flash-messages" >
                      <div class="warning" style="display: none;" >
                          <div id="message"></div>
                      </div>
              </div>
                      <div class="row">
                        <div class="col-md-6">
                          <label for="admission_number"
                            >Admission Number *</label
                          >
                          <input
                            type="text"
                            id="admission_number"
                            name="admission_number"
                            required
                          />
                        </div>
                        <div class="col-md-6">
                          <label for="password"
                            >password *</label
                          >
                          <input
                            type="text"
                            id="password"
                            name="password"
                            required
                          />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <label for="name">Name *</label>
                          <input type="text" id="name" name="name" required />
                        </div>
                        <div class="col-md-6">
                          <label for="date_of_birth">Date of Birth *</label>
                          <input
                            type="date"
                            id="date_of_birth"
                            name="date_of_birth"
                            required
                          />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <label for="gender">Gender *</label>
                          <select id="gender" name="gender" required>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                          </select>
                        </div>
                        <div class="col-md-6">
                          <label for="state">State *</label>
                          <input type="text" id="state" name="state" required />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <label for="semester">Semester *</label>
                          <select id="semester" name="semester" required>
                            <option value="first">first</option>
                            <option value="second">second</option>
                          </select>
                        </div>
                        <div class="col-md-6">
                          <label for="department_name">Department Name *</label>
                          <select name="department_name" id="department_name">
                            <option value="Pharmacy Technician">
                              Pharmacy Technician
                            </option>
                            <option value="Community Health Extention">
                              Community Health Extention
                            </option>
                            <option value="medical laboratory technician">
                              medical laboratory technician
                            </option>
                          </select>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <label for="department_level"
                            >Department Level *</label
                          >
                          <select
                            id="department_level"
                            name="department_level"
                            required
                          >
                            <option value="100">100</option>
                            <option value="200">200</option>
                            <option value="300">300</option>
                          </select>
                        </div>
                        <div class="col-md-6">
                          <label for="email">Email *</label>
                          <input
                            type="email"
                            id="email"
                            name="email"
                            required
                          />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-6">
                          <label for="phone_number">Phone Number *</label>
                          <input
                            type="tel"
                            id="phone_number"
                            name="phone_number"
                            required
                          />
                        </div>
                      </div>

                      <div class="col-md-12 text-center mt-4">
                        <input class="btn btn-primary" type="submit" value="SUBMIT" id="submitBtn" />
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>








        <div id="upload" class="content-section" style="display: none">
          <div class="dashboard_container container px-3">
            <div class="row">
              <div class="admin_board pt-4 px-3 upload-result">
                <div class="">
                  <h5>Add Student Scores</h5>
                  <form
                    method="POST"
                    action="{{ url_for('pages.add_scores') }}"
                    id="scoreForm"
                    class="flex-form student-form"

                    style="background-color: transparent;"
                  >
                    {{ form.hidden_tag() }}

                    <div class="d-flex align-items-center flex-wrap">
                      <div class="pr-3">
                        <label for="student_id">Student ID:</label>
                        {{ form.student_id(class="form-control",
                        placeholder="Enter Student ID") }}
                      </div>

                      <div class="pr-3">
                        <label for="course_id">Course ID:</label>
                        {{ form.course_code(class="form-control",
                        placeholder="Enter Course ID") }}
                      </div>

                      <div class="pr-3">
                        <label for="ca_score">CA Score:</label>
                        {{ form.ca_score(class="form-control",
                        placeholder="Enter CA Score") }}
                      </div>

                      <div class="pr-3">
                        <label for="exam_score">Exam Score:</label>
                        {{ form.exam_score(class="form-control",
                        placeholder="Enter Exam Score") }}
                      </div>
                    </div>
                    <div class="pt-2">
                      {{ form.submit(class="btn btn-primary") }}

                    </div>
                  </form>
                </div>

                <div class="row pt-3 mx-0 w-80 black">
                  <div class="col-md-12 card black">
                    {% if student_info.courses %}
                    <form
                      method="POST"
                      action="{{ url_for('pages.update_student_info') }}"
                      class="flex-form pr-0"
                      >
                      <div class="pt-2">
                        <table class="table table-striped result-table">
                          <thead>
                            <tr>
                              <th scope="col">A/N</th>
                              <th scope="col">Course Code</th>
                              <th scope="col">Course Title</th>
                              <th scope="col">Credit</th>
                              <th scope="col">CA Score</th>
                              <th scope="col">Exam Score</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for course in student_info.courses %}
                            <tr>
                              <td>
                                <input
                                  type="text"
                                  name="student_info[{{ loop.index0 }}][admission_number]"
                                  value="{{ student_info.admission_number }}"
                                  class="form-control"
                                  readonly
                                />
                              </td>

                              <td>
                                <input
                                  type="text"
                                  name="courses[{{ loop.index0 }}][course_code]"
                                  value="{{ course.course_code }}"
                                  class="form-control"
                                  readonly
                                />
                              </td>

                              <td>
                                <input
                                  type="text"
                                  name="courses[{{ loop.index0 }}][course_title]"
                                  value="{{ course.course_title }}"
                                  class="form-control"
                                  readonly
                                />
                              </td>

                              <td>
                                <input
                                  type="number"
                                  name="courses[{{ loop.index0 }}][credit]"
                                  value="{{ course.credit }}"
                                  class="form-control"
                                  readonly
                                />
                              </td>

                              <td>
                                <input
                                  type="number"
                                  name="courses[{{ loop.index0 }}][ca_score]"
                                  value="{{ course.ca_score }}"
                                  class="form-control"
                                />
                              </td>

                              <td>
                                <input
                                  type="number"
                                  name="courses[{{ loop.index0 }}][exam_score]"
                                  value="{{ course.exam_score }}"
                                  class="form-control"
                                />
                              </td>
                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                      <button type="submit" class="btn btn-primary mb-2">
                        add scores
                      </button>
                    </form>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>




        <div id="filter" class="content-section" style="display: none">
          <div class="dashboard_container container px-5">
            <div class="row">
              <div class="admin_board pt-4">
               


<!-- Filter form -->
<form action="/filter-courses" method="GET" class="row" style="background-color: transparent;">
  <div class="col-md-4">
      <label for="course_code" class="form-label">Course Code</label>
      <input type="text" class="form-control" id="course_code" name="course_code" value="{{ course_code }}" placeholder="Enter course code" required>
  </div>
  <div class="col-md-4">
      <label for="department_name" class="form-label">Department Name</label>
      <input type="text" class="form-control" id="department_name" name="department_name" value="{{ department_name }}" placeholder="Enter department name" required>
  </div>
  <div class="col-md-4">
      <label for="department_level" class="form-label">Department Level</label>
      <input type="number" class="form-control" id="department_level" name="department_level" value="{{ department_level }}" placeholder="Enter level" required>
  </div>
  <div class="col-md-12 pt-3">
      <button type="submit" class="btn btn-primary">Filter Students</button>
  </div>
</form>

<!-- Display students list -->
{% if students %}
<form action="/update-ca-scores" method="POST">
  <input type="hidden" name="course_code" value="{{ course_code }}">
  <input type="hidden" name="department_name" value="{{ department_name }}">
  <input type="hidden" name="department_level" value="{{ department_level }}">
  
  <table class="table table-striped mt-4">
    <thead>
    <tr>
        <th>Admission Number</th>
        <th>Name</th>
        <th>Current CA Score</th>
        <th>Department</th>
        <th>Level</th>
        <th>New CA Score</th>
    </tr>
    </thead>
    <tbody>
    {% for student in students %}
    <tr>
        <td>{{ student.admission_number }}</td>
        <td>{{ student.name }}</td>
        <td>{{ student.ca_score }}</td>
        <td>{{ student.department_name }}</td>
        <td>{{ department_level }}</td>
        <td>
            <input type="number" name="ca_scores[{{ student.id }}]" class="form-control" value="{{ pages.update_ca_score }}" required>
        </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>

  <div class="col-md-12 mt-3">
      <button type="submit" class="btn btn-primary">Update CA Scores</button>
  </div>
</form>

<!-- Pagination controls -->
<nav aria-label="Page navigation">
  <ul class="pagination">
      {% if current_page > 1 %}
      <li class="page-item">
          <a class="page-link" href="?course_code={{ course_code }}&department_name={{ department_name }}&semester={{ semester }}&department_level={{ department_level }}&page={{ current_page - 1 }}">Previous</a>
      </li>
      {% endif %}
      
      {% for page_num in range(1, pages + 1) %}
      <li class="page-item {% if page_num == current_page %}active{% endif %}">
          <a class="page-link" href="?course_code={{ course_code }}&department_name={{ department_name }}&semester={{ semester }}&department_level={{ department_level }}&page={{ page_num }}">{{ page_num }}</a>
      </li>
      {% endfor %}
      
      {% if current_page < pages %}
      <li class="page-item">
          <a class="page-link" href="?course_code={{ course_code }}&department_name={{ department_name }}&semester={{ semester }}&department_level={{ department_level }}&page={{ current_page + 1 }}">Next</a>
      </li>
      {% endif %}
  </ul>
</nav>

{% else %}
<p>No students found for this course.</p>
{% endif %}


</div>
            </div>

            <div id="filter-results"></div>
          </div>
        </div>
        


        
      </main>
    </div>






    <script>
      $(document).ready(function() {
        $('#notificationForm').on('submit', function(event) {
          event.preventDefault(); // Prevent default form submission
          
          const token = localStorage.getItem('jwt_token'); // Get the token from storage or wherever you save it
    
          if (!token) {
            alert("Authorization token is missing.");
            return;
          }
    
          const formData = $(this).serialize(); // Get form data
    
          $.ajax({
            url: "{{ url_for('notification_notifications') }}", // Use the correct URL for your endpoint
            method: 'POST',
            data: formData,
            headers: {
              'Authorization': 'Bearer ' + token // Set the Authorization header
            },
            success: function(response) {
              alert(response.message); // Handle success
            },
            error: function(xhr) {
              alert(xhr.responseJSON.msg); // Handle errors
            }
          });
        });
      });
    </script>

 

    <!-- jquery Min JS -->
    <!-- Include jQuery before other scripts using it -->
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slicknav/1.0.10/jquery.slicknav.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="{{ url_for('static', filename='js/new.js') }}"></script>
    <script src="{{ url_for('static', filename='js/custom.js') }}"></script>


    <!-- Include your other scripts -->
    <script src="{{ url_for('static', filename='js/jquery-migrate-3.0.0.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery-ui.min.js') }}"></script>
    <!-- ... other scripts ... -->

    <!-- Bootstrap JS -->
    <script src="{{ url_for('static', filename='js/steller.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.scrollUp.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.nav.js') }}"></script>

    <script src="{{ url_for('static', filename='js/jquery.magnific-popup.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <!-- Your custom scripts -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <!-- ... other custom scripts ... -->
<script src="{{ url_for('static', filename='js/jquery.scrollUp.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/jquery.nav.js') }}"></script>

<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<!-- Your custom scripts -->

</body>
</html>
